# 产业代码仓扫描结果管理平台

## 目标
1、能够在线创建并管理业务代码仓扫描任务
2、查看代码仓AI工具扫描的结果，并且可以人工标注每条数据是否为问题

## 功能设计
| 功能 | 描述 |
| --- | --- |
| 创建代码仓扫描任务 | 创建时用户输入信息：任务名称、代码仓url、扫描分支、扫描路径（多个）、选择扫描助手版本，同时要记录创建人和创建时间 |
| 查看任务 | 1、查看 个人任务/全部任务<br>2、查看单个任务的状态，创建人，创建时间，使用的扫描助手，任务状态 |
| 扫描结果查看 | 1、任务信息查看：任务名称、代码仓url、创建人、创建时间、扫描分支、扫描文件路径、代码仓语言、代码行数</br>2、任务扫描结果统计看板：缺陷统计、缺陷类型分布、缺陷标记状态统计 |
| 扫描结果标注 | 对扫描出的问题，进行人工判定“是否是问题”，同时记录标记人员工号和标注时间 |

## 数据定义
对于每个任务，它的扫描结果数据结构定义如下
| 字段名 | 字段含义 |
| --- | --- |
| fileName | 文件名称 |
| rule_name | 扫描出的问题缺陷名称 |
| line | 问题再当前文件第几行 |
| code_block | 问题切片的代码块 |
| context | 上下文代码 |
| warn | 模型给出的详细问题说明 |

## 数据表设计
1、t_repo_scan_task：管理代码仓ai扫描任务的数据表，表字段及类型定义如下：

| 字段名 | 字段名称 | 字段类型 |
|--|--|--|
| task_id | 任务Id | varchar(36) |
| task_name | 任务名称 | varchar(100) |
| branch | 扫描分支 | varchar(100) |
| path_list | 扫描路径列表 | text |
| s3_path | 扫描结果保存的s3桶路径 | text |
| creator | 任务创建人 | varchar(50) |
| create_time | 任务创建时间 | timestamp |
| task_status | 任务当前所处阶段 | varchar(20) |

